# Seeder äº§å“è®¾è®¡æ–‡æ¡£

> *"Where ideas take root."*

Seeder æ˜¯ AI Agent å·¥ä½œæµçš„ã€Œæ’­ç§æœºã€â€”â€” é€šè¿‡å¯¹è¯å°†æ¨¡ç³Šéœ€æ±‚è½¬åŒ–ä¸ºç»“æ„åŒ–çš„ Linear Issuesï¼Œä¸ºåç»­çš„æ— äººå€¼å®ˆç¼–ç¨‹å¥ å®šåŸºç¡€ã€‚

---

## ä¸€ã€äº§å“å®šä½

### 1.1 æ ¸å¿ƒé—®é¢˜

ç°æœ‰ AI ç¼–ç¨‹å·¥å…·ï¼ˆå¦‚ Claude Code Harnessï¼‰çš„ç—›ç‚¹ï¼š

| ç—›ç‚¹ | è¡¨ç° |
|------|------|
| è®¡åˆ’è´¨é‡ä¾èµ– Session 1 | å¦‚æœ feature_list.json æ‹†å¾—ä¸å¥½ï¼Œåç»­å…¨è·‘å |
| æ— æ³•äººå·¥ä»‹å…¥è°ƒæ•´ | ç”Ÿæˆååªèƒ½å…¨ç›˜æ¥å—æˆ–é‡æ¥ |
| ç¼ºä¹å¯è§†åŒ– | çœ‹ä¸åˆ°ä»»åŠ¡å…¨è²Œï¼Œæ— æ³•è¯„ä¼°å·¥ä½œé‡ |
| ä¸é¡¹ç›®ç®¡ç†è„±èŠ‚ | è®¡åˆ’å­˜åœ¨æœ¬åœ°æ–‡ä»¶ï¼Œå›¢é˜Ÿæ— æ³•åä½œ |

### 1.2 Seeder çš„è§£å†³æ–¹æ¡ˆ

```
å¼€å‘è€…éœ€æ±‚ï¼ˆæ¨¡ç³Šï¼‰
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SEEDER                     â”‚
â”‚                                          â”‚
â”‚  1. å¯¹è¯å¼éœ€æ±‚æ¾„æ¸…                        â”‚
â”‚  2. è‡ªåŠ¨æ‹†è§£ + ç”Ÿæˆä»»åŠ¡                   â”‚
â”‚  3. å¯è§†åŒ– Review & è°ƒæ•´                  â”‚
â”‚  4. ä¸€é”®å‘å¸ƒåˆ° Linear                     â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
Linear Issuesï¼ˆç»“æ„åŒ–ã€å¯è¿½è¸ªã€å¯æ‰§è¡Œï¼‰
      â”‚
      â–¼
ä¸‹æ¸¸ç³»ç»Ÿï¼ˆRalph Wiggum / Coding Agentï¼‰
```

### 1.3 ç”¨æˆ·ç”»åƒ

- **ä¸»è¦ç”¨æˆ·**ï¼šä½¿ç”¨ AI Agent è¿›è¡Œç¼–ç¨‹çš„å¼€å‘è€…
- **ä½¿ç”¨åœºæ™¯**ï¼šå¯åŠ¨æ–°é¡¹ç›®æˆ–æ–°åŠŸèƒ½å‰çš„è®¡åˆ’é˜¶æ®µ
- **æ ¸å¿ƒè¯‰æ±‚**ï¼šå¿«é€Ÿã€å‡†ç¡®åœ°å°†æƒ³æ³•è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨

---

## äºŒã€æ ¸å¿ƒåŠŸèƒ½

### 2.1 åŠŸèƒ½æ¶æ„

```
Seeder
â”œâ”€â”€ ğŸ”— é¡¹ç›®è¿æ¥ (Project Connection)
â”‚   â”œâ”€â”€ è¿æ¥ Git ä»“åº“ï¼ˆè¯»å–ç»“æ„ã€READMEã€ç°æœ‰ä»£ç ï¼‰
â”‚   â”œâ”€â”€ è¿æ¥ Linear å·¥ä½œåŒº
â”‚   â””â”€â”€ å¯¼å…¥ç°æœ‰ app_spec.txt / PRD
â”‚
â”œâ”€â”€ ğŸ’¬ å¯¹è¯è®¡åˆ’ (Conversation Planning)
â”‚   â”œâ”€â”€ éœ€æ±‚æ¾„æ¸…å¯¹è¯
â”‚   â”œâ”€â”€ è‡ªåŠ¨è¿½é—®ç¼ºå¤±ä¿¡æ¯
â”‚   â””â”€â”€ å®æ—¶ç”Ÿæˆä»»åŠ¡é¢„è§ˆ
â”‚
â”œâ”€â”€ ğŸ“‹ è®¡åˆ’çœ‹æ¿ (Plan Board)
â”‚   â”œâ”€â”€ ä»»åŠ¡å¡ç‰‡å±•ç¤º
â”‚   â”œâ”€â”€ æ‹–æ‹½æ’åº
â”‚   â”œâ”€â”€ ç¼–è¾‘/åˆ é™¤/åˆå¹¶ä»»åŠ¡
â”‚   â”œâ”€â”€ æ·»åŠ éªŒæ”¶æ ‡å‡†ï¼ˆæµ‹è¯•ç”¨ä¾‹ï¼‰
â”‚   â””â”€â”€ å·¥ä½œé‡ä¼°ç®—
â”‚
â”œâ”€â”€ ğŸ” Review é¢æ¿ (Review Panel)
â”‚   â”œâ”€â”€ ä»»åŠ¡ä¾èµ–å…³ç³»å›¾
â”‚   â”œâ”€â”€ è¦†ç›–åº¦æ£€æŸ¥ï¼ˆéœ€æ±‚ vs ä»»åŠ¡ï¼‰
â”‚   â””â”€â”€ é£é™©æç¤º
â”‚
â””â”€â”€ ğŸ“¤ å‘å¸ƒ (Publish)
    â”œâ”€â”€ é¢„è§ˆ Linear Issues
    â”œâ”€â”€ é€‰æ‹©ç›®æ ‡ Project / Team
    â””â”€â”€ ä¸€é”®åˆ›å»ºæ‰€æœ‰ Issues
```

### 2.2 åŠŸèƒ½è¯¦è¿°

#### 2.2.1 é¡¹ç›®è¿æ¥

**è¾“å…¥æ–¹å¼**ï¼š
æœåŠ¡å™¨ä¸Šé¢„å…ˆå…‹éš†äº†å¤šä¸ª GitHub é¡¹ç›®ï¼Œç”¨æˆ·é€šè¿‡ä¸‹æ‹‰èœå•é€‰æ‹©ç›®æ ‡é¡¹ç›®å³å¯ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©é¡¹ç›®                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–¾ my-blog                   â”‚   â”‚
â”‚  â”‚   my-saas-app               â”‚   â”‚
â”‚  â”‚   internal-tools            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  é¡¹ç›®è·¯å¾„: /data/repos/my-blog      â”‚
â”‚  æŠ€æœ¯æ ˆ: Next.js, TypeScript        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸Šä¸‹æ–‡æå–**ï¼š
Claude Code CLI ä¼šè‡ªåŠ¨è¯»å–é¡¹ç›®ç»“æ„ã€READMEã€ç°æœ‰ä»£ç ï¼Œæ— éœ€æ‰‹åŠ¨æå–ã€‚

#### 2.2.2 å¯¹è¯è®¡åˆ’

**å¯¹è¯æµç¨‹**ï¼š

```
ç”¨æˆ·: æˆ‘æƒ³åŠ ä¸€ä¸ªè¯„è®ºåŠŸèƒ½

Seeder: å¥½çš„ï¼Œå…³äºè¯„è®ºåŠŸèƒ½ï¼Œæˆ‘éœ€è¦ç¡®è®¤å‡ ç‚¹ï¼š

1. è¯„è®ºå±‚çº§ï¼šæ”¯æŒå•å±‚è¯„è®ºè¿˜æ˜¯åµŒå¥—å›å¤ï¼Ÿ
2. ç”¨æˆ·æƒé™ï¼šæ¸¸å®¢å¯ä»¥è¯„è®ºå—ï¼Œè¿˜æ˜¯å¿…é¡»ç™»å½•ï¼Ÿ
3. å®¡æ ¸æœºåˆ¶ï¼šè¯„è®ºæ˜¯å¦éœ€è¦å®¡æ ¸åæ‰èƒ½æ˜¾ç¤ºï¼Ÿ
4. é€šçŸ¥ï¼šè¯„è®ºåæ˜¯å¦é€šçŸ¥æ–‡ç« ä½œè€…ï¼Ÿ

ç”¨æˆ·: æ”¯æŒåµŒå¥—å›å¤ï¼Œå¿…é¡»ç™»å½•ï¼Œä¸éœ€è¦å®¡æ ¸ï¼Œè¦é€šçŸ¥ä½œè€…

Seeder: æ˜ç™½äº†ã€‚æˆ‘å·²ç”Ÿæˆ 12 ä¸ªä»»åŠ¡ï¼Œç‚¹å‡»ã€ŒæŸ¥çœ‹è®¡åˆ’ã€é¢„è§ˆã€‚

[æŸ¥çœ‹è®¡åˆ’] [ç»§ç»­å¯¹è¯]
```

**æ™ºèƒ½è¿½é—®è§„åˆ™**ï¼š
- æ£€æµ‹éœ€æ±‚ä¸­çš„äºŒä¹‰æ€§
- è¯†åˆ«ç¼ºå¤±çš„è¾¹ç•Œæ¡ä»¶
- æç¤ºæ½œåœ¨çš„æŠ€æœ¯é€‰å‹å†³ç­–

#### 2.2.3 è®¡åˆ’çœ‹æ¿

**ä»»åŠ¡å¡ç‰‡ç»“æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [P0] è¯„è®ºæ•°æ®æ¨¡å‹è®¾è®¡                      ğŸ·ï¸ åç«¯   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ›å»º Comment æ¨¡å‹ï¼ŒåŒ…å«ï¼š                           â”‚
â”‚ - id, content, authorId, postId                    â”‚
â”‚ - parentId (æ”¯æŒåµŒå¥—)                               â”‚
â”‚ - createdAt, updatedAt                             â”‚
â”‚                                                     â”‚
â”‚ ğŸ“ æ¶‰åŠæ–‡ä»¶: prisma/schema.prisma                   â”‚
â”‚                                                     â”‚
â”‚ âœ… éªŒæ”¶æ ‡å‡†:                                        â”‚
â”‚    â–¡ prisma migrate æˆåŠŸ                           â”‚
â”‚    â–¡ Comment è¡¨å·²åˆ›å»º                              â”‚
â”‚    â–¡ æ”¯æŒè‡ªå…³è”æŸ¥è¯¢åµŒå¥—è¯„è®º                         â”‚
â”‚                                                     â”‚
â”‚ â±ï¸ é¢„ä¼°: 0.5h                          [ç¼–è¾‘] [åˆ é™¤] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çœ‹æ¿æ“ä½œ**ï¼š
- æ‹–æ‹½è°ƒæ•´ä¼˜å…ˆçº§
- åˆå¹¶ç›¸ä¼¼ä»»åŠ¡
- æ‹†åˆ†è¿‡å¤§ä»»åŠ¡
- æ‰¹é‡æ‰“æ ‡ç­¾
- è®¾ç½®ä¾èµ–å…³ç³»

#### 2.2.4 Review é¢æ¿

**ä¾èµ–å…³ç³»å›¾**ï¼š
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ æ•°æ®æ¨¡å‹è®¾è®¡  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼            â–¼            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ API æ¥å£ â”‚ â”‚ å‰ç«¯ç»„ä»¶ â”‚ â”‚ é€šçŸ¥æœåŠ¡ â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
             â”‚            â”‚            â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ é›†æˆæµ‹è¯• â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ£€æŸ¥é¡¹**ï¼š
- âš ï¸ ä»»åŠ¡ #7 æ²¡æœ‰éªŒæ”¶æ ‡å‡†
- âš ï¸ ä»»åŠ¡ #3 å’Œ #5 å¯èƒ½æœ‰é‡å¤
- âœ… æ‰€æœ‰éœ€æ±‚ç‚¹å·²è¦†ç›–
- âœ… ä¾èµ–å…³ç³»æ— å¾ªç¯

#### 2.2.5 å‘å¸ƒåˆ° Linear

**å‘å¸ƒé…ç½®**ï¼š
```
ç›®æ ‡å·¥ä½œåŒº: My Team
ç›®æ ‡é¡¹ç›®: [æ–°å»ºé¡¹ç›®: "Blog - è¯„è®ºåŠŸèƒ½"]
æ ‡ç­¾æ˜ å°„:
  - åç«¯ â†’ Backend
  - å‰ç«¯ â†’ Frontend
  - æµ‹è¯• â†’ QA
ä¼˜å…ˆçº§æ˜ å°„:
  - P0 â†’ Urgent
  - P1 â†’ High
  - P2 â†’ Medium
  - P3 â†’ Low
```

**å‘å¸ƒå†…å®¹**ï¼š
- åˆ›å»º Linear Project
- æ‰¹é‡åˆ›å»º Issuesï¼ˆå¸¦æè¿°ã€æ ‡ç­¾ã€ä¼˜å…ˆçº§ï¼‰
- åˆ›å»º META Issueï¼ˆåŒ…å«å®Œæ•´è®¡åˆ’æ‘˜è¦ï¼‰
- è®¾ç½® Issue ä¾èµ–å…³ç³»

---

## ä¸‰ã€æŠ€æœ¯æ¶æ„

### 3.1 ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SEEDER                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Frontend  â”‚    â”‚          Backend (API)          â”‚        â”‚
â”‚  â”‚   (Web UI)  â”‚â—„â”€â”€â–ºâ”‚                                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚        â–²            â”‚  â”‚   Claude Code CLI         â”‚  â”‚        â”‚
â”‚        â”‚            â”‚  â”‚   (subprocess)            â”‚  â”‚        â”‚
â”‚      SSE           â”‚  â”‚   --permission-mode plan   â”‚  â”‚        â”‚
â”‚                     â”‚  â”‚   --output-format stream  â”‚  â”‚        â”‚
â”‚                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       External Services                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Linear    â”‚    â”‚  æœ¬åœ°é¡¹ç›®    â”‚    â”‚ Claude CLI  â”‚         â”‚
â”‚  â”‚     API     â”‚    â”‚  Git Repos  â”‚    â”‚  (å·²å®‰è£…)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒäº¤äº’æµç¨‹**ï¼š
```
ç”¨æˆ·éœ€æ±‚ â†’ POST /api/claude/start â†’ å¯åŠ¨ Claude CLI subprocess
                                           â†“
                                    SSE æµå¼è¿”å›è¾“å‡º
                                           â†“
                              æ£€æµ‹åˆ° AskUserQuestion â†’ å‰ç«¯æ˜¾ç¤ºé—®é¢˜
                                           â†“
ç”¨æˆ·å›ç­” â†’ POST /api/claude/continue (--continue) â†’ æ¢å¤ä¼šè¯ç»§ç»­å¤„ç†
                                           â†“
                                    è¿”å›æœ€ç»ˆè®¡åˆ’ç»“æœ
```

### 3.2 æŠ€æœ¯é€‰å‹ (å·²ç¡®å®š)

| å±‚çº§ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| Frontend | Next.js 16 + TypeScript | App Routerã€å…¨æ ˆç»Ÿä¸€ |
| UI ç»„ä»¶ | Tailwind CSS | å¿«é€Ÿå¼€å‘ã€å“åº”å¼ |
| æ‹–æ‹½ | @dnd-kit/core | (è®¡åˆ’çœ‹æ¿é˜¶æ®µä½¿ç”¨) |
| Backend | Next.js API Routes | å…¨æ ˆç»Ÿä¸€ï¼ŒSSE æ”¯æŒ |
| AI | **Claude Code CLI** | subprocess è°ƒç”¨ï¼Œplan mode |
| è®¤è¯ | NextAuth.js | (åç»­æ·»åŠ ) |
| Database | PostgreSQL + Prisma | (åç»­æ·»åŠ ) |
| éƒ¨ç½² | Vercel / è‡ªå»ºæœåŠ¡å™¨ | éœ€è¦ Claude CLI ç¯å¢ƒ |

**å…³é”®æŠ€æœ¯å†³ç­–**ï¼š
- ä½¿ç”¨ Claude Code CLI è€Œéç›´æ¥è°ƒç”¨ Claude API
- CLI çš„ `--permission-mode plan` æä¾›åªè¯»è§„åˆ’æ¨¡å¼
- CLI çš„ `--continue` å‚æ•°å®ç°ä¼šè¯æ¢å¤å’Œå¤šè½®äº¤äº’
- CLI å†…ç½®çš„ `AskUserQuestion` å·¥å…·è‡ªåŠ¨å¤„ç†è¿½é—®é€»è¾‘

### 3.3 æ ¸å¿ƒæ•°æ®æ¨¡å‹

```prisma
// prisma/schema.prisma

model User {
  id            String    @id @default(cuid())
  slackUserId   String    @unique      // Slack User ID (å”¯ä¸€æ ‡è¯†)
  slackUsername String                 // Slack æ˜¾ç¤ºå
  slackTeamId   String?                // Slack å›¢é˜Ÿ ID
  email         String?                // å¯é€‰
  avatarUrl     String?                // å¤´åƒ URL
  linearToken   String?                // åŠ å¯†å­˜å‚¨
  projects      Project[]
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model Project {
  id              String    @id @default(cuid())
  name            String
  description     String?
  userId          String
  user            User      @relation(fields: [userId], references: [id])
  
  // Git è¿æ¥
  gitUrl          String?
  gitBranch       String?   @default("main")
  
  // æå–çš„ä¸Šä¸‹æ–‡
  techStack       String[]
  conventions     Json?
  
  // è®¡åˆ’
  plans           Plan[]
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Plan {
  id              String    @id @default(cuid())
  projectId       String
  project         Project   @relation(fields: [projectId], references: [id])
  
  name            String
  description     String?
  status          PlanStatus @default(DRAFT)
  
  // å¯¹è¯å†å²
  conversations   Conversation[]
  
  // ä»»åŠ¡
  tasks           Task[]
  
  // Linear åŒæ­¥
  linearProjectId String?
  publishedAt     DateTime?
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

enum PlanStatus {
  DRAFT
  REVIEWING
  PUBLISHED
  ARCHIVED
}

model Task {
  id              String    @id @default(cuid())
  planId          String
  plan            Plan      @relation(fields: [planId], references: [id])
  
  title           String
  description     String
  priority        Int       @default(2)  // 0=P0, 1=P1, 2=P2, 3=P3
  labels          String[]
  
  // éªŒæ”¶æ ‡å‡†
  acceptanceCriteria String[]
  
  // å…³è”æ–‡ä»¶
  relatedFiles    String[]
  
  // é¢„ä¼°
  estimateHours   Float?
  
  // æ’åº
  sortOrder       Int       @default(0)
  
  // ä¾èµ–
  dependsOnId     String?
  dependsOn       Task?     @relation("TaskDependency", fields: [dependsOnId], references: [id])
  dependents      Task[]    @relation("TaskDependency")
  
  // Linear åŒæ­¥
  linearIssueId   String?
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Conversation {
  id              String    @id @default(cuid())
  planId          String
  plan            Plan      @relation(fields: [planId], references: [id])
  
  role            String    // "user" | "assistant"
  content         String
  
  createdAt       DateTime  @default(now())
}
```

---

## å››ã€æ ¸å¿ƒ API è®¾è®¡

### 4.1 Claude å¯¹è¯ API (SSE)

```typescript
// POST /api/claude/start
// å¯åŠ¨ Claude CLI ä¼šè¯ï¼Œè¿”å› SSE æµ

interface StartRequest {
  prompt: string;           // ç”¨æˆ·éœ€æ±‚æè¿°
  projectPath?: string;     // é¡¹ç›®è·¯å¾„ (ä»ä¸‹æ‹‰èœå•é€‰æ‹©)
}

// SSE äº‹ä»¶ç±»å‹
type SSEEvent =
  | { type: 'init'; data: { cwd: string } }
  | { type: 'text'; data: { content: string } }
  | { type: 'tool'; data: { name: string } }
  | { type: 'question'; data: QuestionData }
  | { type: 'result'; data: { content: string } }
  | { type: 'error'; data: { message: string } }
  | { type: 'done'; data: {} }

interface QuestionData {
  toolUseId: string;
  questions: Array<{
    question: string;
    header?: string;
    options?: Array<{ label: string; description?: string }>;
    multiSelect?: boolean;
  }>;
}
```

### 4.2 ç»§ç»­å¯¹è¯ API (SSE)

```typescript
// POST /api/claude/continue
// å‘é€ç”¨æˆ·å›ç­”å¹¶ç»§ç»­ä¼šè¯ (ä½¿ç”¨ --continue)

interface ContinueRequest {
  answer: string;           // ç”¨æˆ·çš„å›ç­” (å¯åŒ…å«å¤šä¸ªé—®é¢˜çš„ç­”æ¡ˆ)
  projectPath?: string;
}

// è¿”å›åŒæ ·çš„ SSE æµ
```

### 4.3 é¡¹ç›®åˆ—è¡¨ API

```typescript
// GET /api/projects
// è·å–æœåŠ¡å™¨ä¸Šå·²å…‹éš†çš„é¡¹ç›®åˆ—è¡¨

interface ProjectsResponse {
  projects: Array<{
    name: string;
    path: string;
    description?: string;
  }>;
}
```

### 4.4 å‘å¸ƒåˆ° Linear API (åç»­å®ç°)

```typescript
// POST /api/linear/publish
// å°†è®¡åˆ’ç»“æœå‘å¸ƒåˆ° Linear

interface PublishRequest {
  linearTeamId: string;
  projectName: string;
  tasks: Task[];
}

interface PublishResponse {
  linearProjectId: string;
  linearProjectUrl: string;
  issues: Array<{
    taskId: string;
    linearIssueId: string;
    linearIssueUrl: string;
  }>;
}
```

---

## äº”ã€Claude Code CLI é›†æˆ

### 5.1 ä½¿ç”¨å†…ç½® Plan Mode

**æ— éœ€è‡ªå®šä¹‰ Prompt**ï¼šClaude Code CLI çš„ `--permission-mode plan` å†…ç½®äº†å®Œæ•´çš„è§„åˆ’èƒ½åŠ›ã€‚

**CLI å‚æ•°**ï¼š
```bash
# å¯åŠ¨æ–°ä¼šè¯
claude \
  --permission-mode plan \
  --output-format stream-json \
  --verbose \
  --print \
  --cwd /path/to/project \
  "ç”¨æˆ·çš„éœ€æ±‚æè¿°"

# ç»§ç»­ä¼šè¯ (å‘é€å›ç­”)
claude \
  --permission-mode plan \
  --output-format stream-json \
  --verbose \
  --print \
  --continue \
  "ç”¨æˆ·çš„å›ç­”"
```

### 5.2 AskUserQuestion å·¥å…·

Claude Code å†…ç½®çš„ `AskUserQuestion` å·¥å…·ä¼šè‡ªåŠ¨ï¼š
- è¯†åˆ«éœ€æ±‚ä¸­çš„æ¨¡ç³Šç‚¹
- ç”Ÿæˆç»“æ„åŒ–çš„é—®é¢˜å’Œé€‰é¡¹
- ç­‰å¾…ç”¨æˆ·å›ç­”åç»§ç»­å¤„ç†

**æ£€æµ‹æ–¹å¼**ï¼š
```typescript
// åœ¨ stream-json è¾“å‡ºä¸­æ£€æµ‹
if (msg.type === 'assistant' && msg.message?.content) {
  for (const content of msg.message.content) {
    if (content.type === 'tool_use' && content.name === 'AskUserQuestion') {
      // content.input.questions åŒ…å«é—®é¢˜æ•°ç»„
      // æ¯ä¸ªé—®é¢˜æœ‰ question, header, options, multiSelect
    }
  }
}
```

### 5.3 ç»“æœæå–

**æœ€ç»ˆç»“æœ**åœ¨ `result` æ¶ˆæ¯ä¸­ï¼š
```typescript
if (msg.type === 'result' && msg.subtype === 'success') {
  const planContent = msg.result;  // æœ€ç»ˆçš„è®¡åˆ’å†…å®¹ (Markdown æ ¼å¼)
}
```

### 5.4 ä¼šè¯ç®¡ç†

**Session ID æœºåˆ¶**ï¼š
- Claude CLI æ¯æ¬¡è°ƒç”¨è¿”å› `session_id`ï¼ˆåœ¨ result æ¶ˆæ¯ä¸­ï¼‰
- ä½¿ç”¨ `--resume <session_id>` æ¢å¤ç‰¹å®šä¼šè¯ï¼ˆæ¨èï¼‰
- `--continue` åªæ¢å¤"æœ€è¿‘"ä¼šè¯ï¼Œå¤šç”¨æˆ·ç¯å¢ƒä¸å®‰å…¨

**æ¨èæµç¨‹**ï¼š
```typescript
// ç¬¬ä¸€æ¬¡è°ƒç”¨
const result = await runClaude(prompt);
const sessionId = result.session_id;  // ä¿å­˜ session_id

// åç»­è°ƒç”¨ - ä½¿ç”¨ --resume
await runClaude(answer, { resume: sessionId });
```

**CLI å‚æ•°**ï¼š
```bash
# æ¢å¤ç‰¹å®šä¼šè¯
claude --resume <session_id> --print ...
```

---

## å…­ã€UI/UX è®¾è®¡è¦ç‚¹

### 6.1 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ± Seeder                    [Projects â–¾]  [Settings]  [User] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚    å¯¹è¯é¢æ¿           â”‚  â”‚         è®¡åˆ’çœ‹æ¿                 â”‚ â”‚
â”‚  â”‚    (å·¦ä¾§ 40%)        â”‚  â”‚         (å³ä¾§ 60%)               â”‚ â”‚
â”‚  â”‚                      â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  [å…¨éƒ¨] [åç«¯] [å‰ç«¯] [æµ‹è¯•]     â”‚ â”‚
â”‚  â”‚  â”‚ AI: å…³äºè¯„è®º... â”‚  â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚                      â”‚  â”‚  â”‚ Task 1  â”‚ â”‚ Task 2  â”‚        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚ P0 åç«¯ â”‚ â”‚ P1 åç«¯ â”‚        â”‚ â”‚
â”‚  â”‚  â”‚ You: æ”¯æŒåµŒå¥—  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚                      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚ Task 3  â”‚ â”‚ Task 4  â”‚        â”‚ â”‚
â”‚  â”‚  â”‚ AI: å¥½çš„...    â”‚  â”‚  â”‚  â”‚ P1 å‰ç«¯ â”‚ â”‚ P2 æµ‹è¯• â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚                      â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  [è¾“å…¥æ¡†...] [å‘é€]  â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚                      â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  [ç”Ÿæˆè®¡åˆ’]          â”‚  â”‚  å…± 12 ä¸ªä»»åŠ¡ | é¢„ä¼° 18h          â”‚ â”‚
â”‚  â”‚                      â”‚  â”‚  [Review] [å‘å¸ƒåˆ° Linear]        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å…³é”®äº¤äº’

**å¯¹è¯ç”Ÿæˆä»»åŠ¡**ï¼š
- ç”¨æˆ·å‘æ¶ˆæ¯ â†’ å³ä¾§å®æ—¶å‡ºç°/æ›´æ–°ä»»åŠ¡å¡ç‰‡
- å¡ç‰‡æœ‰ã€Œæ–°å¢ã€åŠ¨ç”»ï¼Œæ ‡è¯†æ˜¯æœ¬è½®æ–°ç”Ÿæˆçš„
- æ‚¬æµ®æ˜¾ç¤ºã€Œç‚¹å‡»ç¼–è¾‘ã€

**ä»»åŠ¡ç¼–è¾‘**ï¼š
- ç‚¹å‡»å¡ç‰‡ â†’ å±•å¼€è¯¦æƒ…é¢æ¿ï¼ˆå³ä¾§æ»‘å…¥ï¼‰
- æ”¯æŒ Markdown ç¼–è¾‘æè¿°
- éªŒæ”¶æ ‡å‡†å¯é€æ¡æ·»åŠ /åˆ é™¤
- æ‹–æ‹½è°ƒæ•´ä¾èµ–å…³ç³»

**å‘å¸ƒæµç¨‹**ï¼š
```
[å‘å¸ƒåˆ° Linear]
â”‚
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹© Linear å·¥ä½œåŒº              â”‚
â”‚  [â–¾ My Team              ]      â”‚
â”‚                                  â”‚
â”‚  é¡¹ç›®åç§°                        â”‚
â”‚  [Blog - è¯„è®ºåŠŸèƒ½        ]       â”‚
â”‚                                  â”‚
â”‚  â–¡ åˆ›å»º META Issue (æ¨è)        â”‚
â”‚  â–¡ è®¾ç½® Issue ä¾èµ–å…³ç³»           â”‚
â”‚                                  â”‚
â”‚  é¢„è§ˆ: å°†åˆ›å»º 12 ä¸ª Issues       â”‚
â”‚                                  â”‚
â”‚  [å–æ¶ˆ]              [ç¡®è®¤å‘å¸ƒ]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸ƒã€Linear é›†æˆç»†èŠ‚

### 7.1 OAuth æˆæƒæµç¨‹

```
1. ç”¨æˆ·ç‚¹å‡»ã€Œè¿æ¥ Linearã€
2. è·³è½¬ Linear OAuthï¼š
   https://linear.app/oauth/authorize?
   client_id=xxx&
   redirect_uri=xxx&
   scope=read,write,issues:create&
   response_type=code

3. ç”¨æˆ·æˆæƒåå›è°ƒï¼Œè·å– access_token
4. å­˜å‚¨ tokenï¼ˆåŠ å¯†ï¼‰åˆ°ç”¨æˆ·è®°å½•
```

### 7.2 Issue åˆ›å»ºæ˜ å°„

```typescript
// Seeder Task â†’ Linear Issue

interface LinearIssueCreate {
  title: task.title,
  description: `
${task.description}

## éªŒæ”¶æ ‡å‡†
${task.acceptanceCriteria.map(c => `- [ ] ${c}`).join('\n')}

## ç›¸å…³æ–‡ä»¶
${task.relatedFiles.map(f => `- \`${f}\``).join('\n')}

---
*ç”± Seeder è‡ªåŠ¨åˆ›å»º*
  `,
  priority: priorityMapping[task.priority],
  labelIds: task.labels.map(l => labelMapping[l]),
  estimate: task.estimateHours,
  projectId: targetProjectId,
}
```

### 7.3 META Issue æ¨¡æ¿

```markdown
# ğŸ“‹ è®¡åˆ’æ‘˜è¦: {planName}

## éœ€æ±‚æ¦‚è¿°
{requirementSummary}

## ä»»åŠ¡ç»Ÿè®¡
- æ€»ä»»åŠ¡æ•°: {totalTasks}
- P0 (ç´§æ€¥): {p0Count}
- P1 (é«˜): {p1Count}
- P2 (ä¸­): {p2Count}
- P3 (ä½): {p3Count}
- æ€»é¢„ä¼°å·¥æ—¶: {totalHours}h

## ä»»åŠ¡åˆ—è¡¨
{tasks.map(t => `- [ ] #${t.linearIssueId} ${t.title}`).join('\n')}

## æŠ€æœ¯æ ˆ
{techStack.join(', ')}

## çº¦å®š
{conventions}

---
*ç”± Seeder ç”Ÿæˆäº {timestamp}*
*è®¡åˆ’ ID: {planId}*
```

---

## å…«ã€MVP èŒƒå›´å»ºè®®

### Phase 1: æ ¸å¿ƒæµç¨‹ âœ… (2026-01-05 å®Œæˆ)

- [x] ç”¨æˆ·è®¤è¯ï¼ˆSlack Botï¼Œè§é™„å½• Aï¼‰
  - Slack Bot å­é¡¹ç›® (`slack-bot/`)ï¼ŒSocket Mode
  - `/seedbed-login` å‘½ä»¤ç”Ÿæˆä¸€æ¬¡æ€§ç™»å½•é“¾æ¥
  - JWT è®¤è¯ï¼ŒCookie å­˜å‚¨
- [x] é¡¹ç›®åˆ›å»ºï¼ˆæ‰‹åŠ¨è¾“å…¥æè¿°ï¼‰
  - `/api/projects` CRUD API
  - `/api/projects/[id]/plans` è®¡åˆ’ç®¡ç†
- [x] å¯¹è¯ç•Œé¢ï¼ˆåŸºç¡€èŠå¤©ï¼‰
  - å·¦å³åˆ†æ å¸ƒå±€ï¼ˆå¯¹è¯ + ä»»åŠ¡åˆ—è¡¨ï¼‰
  - SSE æµå¼å“åº”
  - å¤šè½®é—®ç­”æ”¯æŒ (AskUserQuestion)
- [x] AI ç”Ÿæˆä»»åŠ¡ï¼ˆè°ƒç”¨ Claude CLIï¼‰
  - `--permission-mode plan` åªè¯»è§„åˆ’æ¨¡å¼
  - `--output-format stream-json` æµå¼è¾“å‡º
  - Session ç®¡ç† (`--continue`)
- [x] ä»»åŠ¡åˆ—è¡¨å±•ç¤ºï¼ˆåªè¯»ï¼‰
  - ä»»åŠ¡å¡ç‰‡ç»„ä»¶ï¼Œä¼˜å…ˆçº§é¢œè‰²æ ‡è¯†
  - éªŒæ”¶æ ‡å‡†ã€æ ‡ç­¾ã€é¢„ä¼°æ—¶é—´å±•ç¤º
- [x] å¯¼å‡º JSON / Markdown
  - å‰ç«¯ä¸‹è½½æŒ‰é’®

### Phase 2: ç¼–è¾‘èƒ½åŠ› âœ… (2026-01-05 å®Œæˆ)

- [x] ä»»åŠ¡å¡ç‰‡ç¼–è¾‘
  - TaskCard ç»„ä»¶æ”¯æŒç‚¹å‡»é€‰ä¸­
  - TaskEditPanel å³ä¾§æ»‘å…¥ç¼–è¾‘é¢æ¿
  - æ”¯æŒç¼–è¾‘æ ‡é¢˜ã€æè¿°ã€ä¼˜å…ˆçº§ã€æ ‡ç­¾ã€é¢„ä¼°æ—¶é—´
- [x] æ‹–æ‹½æ’åº
  - ä½¿ç”¨ @dnd-kit/core å’Œ @dnd-kit/sortable
  - æ”¯æŒæ‹–æ‹½è°ƒæ•´ä»»åŠ¡é¡ºåº
- [x] éªŒæ”¶æ ‡å‡†ç¼–è¾‘
  - æ”¯æŒæ·»åŠ æ–°éªŒæ”¶æ ‡å‡†
  - æ”¯æŒåˆ é™¤ç°æœ‰éªŒæ”¶æ ‡å‡†
  - æ”¯æŒä¿®æ”¹éªŒæ”¶æ ‡å‡†å†…å®¹
- [x] ä¾èµ–å…³ç³»è®¾ç½®
  - ä¸‹æ‹‰é€‰æ‹©ä¾èµ–çš„ä»»åŠ¡
  - é˜²æ­¢å¾ªç¯ä¾èµ–

### Phase 3: Linear é›†æˆ âœ… (2026-01-05 å®Œæˆ)

**æŠ€æœ¯æ–¹æ¡ˆ** (å‚è€ƒ taskPilotSlackBot å®ç°):
- ä½¿ç”¨ `@linear/sdk` å®˜æ–¹ SDK
- API Key è®¤è¯æ–¹å¼ (ç®€å•ç›´æ¥ï¼Œé€‚åˆå›¢é˜Ÿå†…éƒ¨ä½¿ç”¨)
- ç”¨æˆ·åœ¨è®¾ç½®é¡µé¢é…ç½®ä¸ªäºº Linear API Key

**æ ¸å¿ƒä»»åŠ¡**:
- [x] Linear API Key é…ç½®
  - ç”¨æˆ·è®¾ç½®é¡µé¢æ·»åŠ  Linear API Key è¾“å…¥æ¡†
  - åŠ å¯†å­˜å‚¨åˆ° User.linearToken å­—æ®µ
  - éªŒè¯ API Key æœ‰æ•ˆæ€§
- [x] è·å– Linear å·¥ä½œåŒºä¿¡æ¯
  - è·å–ç”¨æˆ·æ‰€å± Teams åˆ—è¡¨
  - è·å– Team ä¸‹çš„ Projects
  - è·å–å·¥ä½œæµçŠ¶æ€ (WorkflowStates)
- [x] å‘å¸ƒä»»åŠ¡åˆ° Linear
  - é€‰æ‹©ç›®æ ‡ Team/Project
  - æ‰¹é‡åˆ›å»º Issues
  - ä¿å­˜ linearIssueId å…³è”
- [x] åˆ›å»º META Issue (å¯é€‰)
  - åŒ…å«è®¡åˆ’æ‘˜è¦
  - é“¾æ¥æ‰€æœ‰å­ä»»åŠ¡
- [ ] Issue çŠ¶æ€åŒæ­¥ (å¯é€‰ï¼Œåç»­å®ç°)
  - å®šæ—¶åŒæ­¥ Linear Issue çŠ¶æ€
  - æ›´æ–°æœ¬åœ°ä»»åŠ¡çŠ¶æ€

**è¯¦ç»†å®ç°æ–¹æ¡ˆè§é™„å½• B**

### Phase 4: å¤šäººåä½œ âœ… (2026-01-05 å®Œæˆ)

**éœ€æ±‚**:
- æ˜¾ç¤ºç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¤´åƒ
- å…¨å‘˜å…±äº«æ‰€æœ‰é¡¹ç›®ï¼ˆå…¬å¸å†…éƒ¨ä½¿ç”¨ï¼Œæ— éœ€æƒé™éš”ç¦»ï¼‰
- æ— æƒé™åŒºåˆ†ï¼Œæ‰€æœ‰ç™»å½•ç”¨æˆ·å¯åšä»»ä½•æ“ä½œ

**Step 1: Auth å±‚æ·»åŠ  slackTeamId æ”¯æŒ**
- [x] `src/lib/auth.ts` - AuthUser æ¥å£æ·»åŠ  `slackTeamId`ï¼ŒgetCurrentUser SELECT æ·»åŠ è¯¥å­—æ®µ
- [x] `src/app/api/auth/slack/route.ts` - JWT payload æ·»åŠ  `slackTeamId`
- [x] `src/app/api/auth/me/route.ts` - è¿”å›æ•°æ®æ·»åŠ  `slackTeamId`

**Step 2: ç§»é™¤ API ç”¨æˆ·éš”ç¦» (å…¨å‘˜å…±äº«)**

æ ¸å¿ƒæ”¹åŠ¨: ç§»é™¤ `where: { userId: user.id }` é™åˆ¶ï¼Œæ‰€æœ‰ç™»å½•ç”¨æˆ·å…±äº«æ‰€æœ‰èµ„æº

- [x] `src/app/api/projects/route.ts` - ç§»é™¤ç”¨æˆ·è¿‡æ»¤ï¼Œinclude user ä¿¡æ¯æ˜¾ç¤ºåˆ›å»ºè€…
- [x] `src/app/api/projects/[id]/route.ts` - ç§»é™¤ç”¨æˆ·æƒé™æ£€æŸ¥
- [x] `src/app/api/projects/[id]/plans/route.ts` - åŒä¸Š
- [x] `src/app/api/plans/[planId]/route.ts` - åŒä¸Š
- [x] `src/app/api/plans/[planId]/tasks/route.ts` - åŒä¸Š
- [x] `src/app/api/plans/[planId]/publish/route.ts` - åŒä¸Š

**Step 3: UserHeader ç»„ä»¶**
- [x] æ–°å»º `src/components/UserHeader.tsx` - æ˜¾ç¤ºç”¨æˆ·å + å¤´åƒï¼ˆæˆ–å­—æ¯å¤´åƒï¼‰+ ä¸‹æ‹‰èœå•
- [x] ä¿®æ”¹ `src/app/page.tsx` - Header é›†æˆ UserHeader

**Step 4: (è·³è¿‡) Slack å¤´åƒè·å–**
- ç”¨æˆ·æš‚æ— éœ€æ±‚ï¼Œå­—æ¯å¤´åƒå·²è¶³å¤Ÿ

### Phase 5: å¢å¼ºåŠŸèƒ½ (åç»­)

- [ ] å†å²ç‰ˆæœ¬å¯¹æ¯”
- [ ] æ¨¡æ¿åº“

---

## ä¹ã€æ–‡ä»¶ç»“æ„å»ºè®®

```
seedbed/
â”œâ”€â”€ slack-bot/                    # Slack Bot å­é¡¹ç›® (è®¤è¯æœåŠ¡)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”‚   â””â”€â”€ login.ts
â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚       â””â”€â”€ token.ts
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.example
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”‚   â””â”€â”€ callback/page.tsx
â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”œâ”€â”€ projects/page.tsx
â”‚   â”‚   â””â”€â”€ projects/[id]/page.tsx
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ slack/route.ts        # Slack Token éªŒè¯
â”‚   â”‚   â”‚   â”œâ”€â”€ token/route.ts        # ç”Ÿæˆç™»å½• Token (ä¾› Bot è°ƒç”¨)
â”‚   â”‚   â”‚   â””â”€â”€ logout/route.ts       # ç™»å‡º
â”‚   â”‚   â”œâ”€â”€ projects/route.ts
â”‚   â”‚   â”œâ”€â”€ claude/
â”‚   â”‚   â”‚   â”œâ”€â”€ start/route.ts
â”‚   â”‚   â”‚   â””â”€â”€ continue/route.ts
â”‚   â”‚   â”œâ”€â”€ plans/[id]/chat/route.ts
â”‚   â”‚   â”œâ”€â”€ plans/[id]/tasks/route.ts
â”‚   â”‚   â””â”€â”€ plans/[id]/publish/route.ts
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ ChatPanel.tsx
â”‚   â”‚   â”œâ”€â”€ MessageBubble.tsx
â”‚   â”‚   â””â”€â”€ ChatInput.tsx
â”‚   â”œâ”€â”€ board/
â”‚   â”‚   â”œâ”€â”€ PlanBoard.tsx
â”‚   â”‚   â”œâ”€â”€ TaskCard.tsx
â”‚   â”‚   â”œâ”€â”€ TaskDetail.tsx
â”‚   â”‚   â””â”€â”€ DependencyGraph.tsx
â”‚   â”œâ”€â”€ publish/
â”‚   â”‚   â”œâ”€â”€ PublishDialog.tsx
â”‚   â”‚   â””â”€â”€ LinearPreview.tsx
â”‚   â””â”€â”€ ui/                       # shadcn components
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”œâ”€â”€ prompts.ts
â”‚   â”‚   â””â”€â”€ generate-tasks.ts
â”‚   â”œâ”€â”€ linear/
â”‚   â”‚   â”œâ”€â”€ client.ts
â”‚   â”‚   â””â”€â”€ publish.ts
â”‚   â”œâ”€â”€ prisma.ts
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma
â”œâ”€â”€ public/
â”œâ”€â”€ .env.example
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## åã€ç¯å¢ƒå˜é‡

```bash
# .env.example

# Database (åç»­æ·»åŠ )
DATABASE_URL="postgresql://..."

# Auth - Slack Bot (åç»­æ·»åŠ )
AUTH_SECRET="..."                    # JWT ç­¾åå¯†é’¥
SLACK_BOT_TOKEN="xoxb-..."           # Slack Bot Token
SLACK_SIGNING_SECRET="..."           # Slack è¯·æ±‚ç­¾åéªŒè¯

# Linear (åç»­æ·»åŠ )
LINEAR_CLIENT_ID="..."
LINEAR_CLIENT_SECRET="..."
LINEAR_REDIRECT_URI="http://localhost:3000/api/auth/linear/callback"

# é¡¹ç›®ä»“åº“æ ¹ç›®å½•
PROJECTS_ROOT="/data/repos"

# æ³¨æ„: ä¸éœ€è¦ ANTHROPIC_API_KEY
# Claude Code CLI ä½¿ç”¨æœ¬åœ°å·²é…ç½®çš„è®¤è¯
```

---

## åä¸€ã€ä¸‹æ¸¸ç³»ç»Ÿå¯¹æ¥

### 11.1 è¾“å‡ºæ ¼å¼å…¼å®¹

Seeder å‘å¸ƒåˆ° Linear åï¼Œä¸‹æ¸¸ç³»ç»Ÿï¼ˆå¦‚ Ralph Wiggum / Linear Harnessï¼‰å¯ä»¥ï¼š

1. **é€šè¿‡ Linear API è·å–ä»»åŠ¡**ï¼š
   ```typescript
   const issues = await linearClient.issues({
     filter: {
       project: { id: { eq: projectId } },
       state: { type: { eq: "unstarted" } }
     }
   });
   ```

2. **æŒ‰ä¼˜å…ˆçº§æ’åºæ‰§è¡Œ**

3. **æ›´æ–° Issue çŠ¶æ€**ï¼šTodo â†’ In Progress â†’ Done

4. **åœ¨ Issue è¯„è®ºä¸­è®°å½•è¿›åº¦**

### 11.2 feature_list.json å…¼å®¹

å¦‚æœéœ€è¦å…¼å®¹åŸå§‹ Harness æ ¼å¼ï¼Œå¯åœ¨å‘å¸ƒæ—¶é¢å¤–ç”Ÿæˆï¼š

```json
{
  "features": [
    {
      "id": "1",
      "title": "è¯„è®ºæ•°æ®æ¨¡å‹è®¾è®¡",
      "test_cases": [
        "prisma migrate æˆåŠŸ",
        "Comment è¡¨å·²åˆ›å»º"
      ],
      "status": "pending",
      "linear_issue_id": "ABC-123"
    }
  ]
}
```

---

## åäºŒã€å¾…åŠäº‹é¡¹ (TODO)

åŸºäºéªŒè¯é€šè¿‡çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä»¥ä¸‹æ˜¯éœ€è¦å®æ–½çš„å…·ä½“ä»»åŠ¡ï¼š

### 12.1 Session ç®¡ç†ä¼˜åŒ– âœ… (2026-01-05 å®Œæˆ)

- [x] ä¿®æ”¹ `/api/claude/start` - ä» result æ¶ˆæ¯ä¸­æå– `session_id` å¹¶è¿”å›ç»™å‰ç«¯
- [x] ä¿®æ”¹ `/api/claude/continue` - æ¥æ”¶ `sessionId` å‚æ•°ï¼Œä½¿ç”¨ `--resume <session_id>` æ›¿ä»£ `--continue`
- [x] å‰ç«¯çŠ¶æ€ç®¡ç† - ä¿å­˜å½“å‰ä¼šè¯çš„ `sessionId`ï¼Œæ¯æ¬¡ç»§ç»­å¯¹è¯æ—¶ä¼ é€’
- [x] é”™è¯¯å¤„ç† - å¤„ç† session è¿‡æœŸæˆ–ä¸å­˜åœ¨çš„æƒ…å†µ

### 12.2 API å®Œå–„ âœ… (2026-01-05 å®Œæˆ)

- [x] å®ç° `/api/projects/local` - è¯»å– `PROJECTS_ROOT` ç›®å½•ä¸‹çš„é¡¹ç›®åˆ—è¡¨
- [x] æ·»åŠ é¡¹ç›®è¯¦æƒ…æ¥å£ `/api/projects/local/details` - è¿”å›é¡¹ç›®æŠ€æœ¯æ ˆã€æè¿°ç­‰ä¿¡æ¯
- [x] SSE é”™è¯¯äº‹ä»¶ - ç»Ÿä¸€é”™è¯¯æ ¼å¼ (`src/lib/sse-types.ts`)ï¼Œä¾¿äºå‰ç«¯å¤„ç†

### 12.3 å‰ç«¯åŠŸèƒ½

- [x] é¡¹ç›®ä¸‹æ‹‰é€‰æ‹©å™¨ - è°ƒç”¨ `/api/projects` è·å–åˆ—è¡¨
  - æ–°å»º `src/components/ProjectSelector.tsx` ç»„ä»¶
  - æ”¯æŒæ•°æ®åº“é¡¹ç›®å’Œæœ¬åœ°é¡¹ç›®ä¸¤ç§æ¥æº
  - æ”¯æŒæœç´¢è¿‡æ»¤ã€æŠ€æœ¯æ ˆå±•ç¤ºã€Git çŠ¶æ€æ ‡è¯†
  - å·²é›†æˆåˆ°ä¸»é¡µé¢ Header åŒºåŸŸ
  - é€‰ä¸­é¡¹ç›®çš„ path ä¼šä¼ é€’ç»™ Claude API
- [x] åŠ è½½çŠ¶æ€ä¼˜åŒ– - æ·»åŠ  skeleton loading
  - æ–°å»º `src/components/ui/Skeleton.tsx` - éª¨æ¶å±ç»„ä»¶ (Skeleton, TaskCardSkeleton, TaskListSkeleton ç­‰)
  - æ–°å»º `src/components/ui/LoadingSpinner.tsx` - åŠ è½½åŠ¨ç”»ç»„ä»¶ (LoadingSpinner, LoadingOverlay, LoadingState ç­‰)
  - TaskList ç»„ä»¶æ·»åŠ  `loading` propï¼Œå¤„ç†åŠ è½½æ—¶æ˜¾ç¤ºéª¨æ¶å±
  - ä¸»é¡µé¢ processing çŠ¶æ€ä½¿ç”¨ç»Ÿä¸€çš„ LoadingSpinner ç»„ä»¶
- [x] å†å²å¯¹è¯å±•ç¤º - ä¿å­˜å¹¶å±•ç¤ºå®Œæ•´å¯¹è¯å†å²
  - æ–°å»º `/api/plans/[planId]/conversations` API (GET/POST/DELETE)
  - ä¿®æ”¹ `/api/claude/start` - åˆ›å»º Plan å¹¶ä¿å­˜ç”¨æˆ·/åŠ©æ‰‹æ¶ˆæ¯åˆ°æ•°æ®åº“
  - ä¿®æ”¹ `/api/claude/continue` - ä¿å­˜åç»­å¯¹è¯æ¶ˆæ¯
  - å‰ç«¯ä¼ é€’ projectId å’Œ planIdï¼Œåœ¨ result äº‹ä»¶ä¸­æ¥æ”¶ planId
  - çŠ¶æ€æ æ˜¾ç¤ºå¯¹è¯ä¿å­˜çŠ¶æ€ï¼ˆæ•°æ®åº“é¡¹ç›®æ˜¾ç¤º"Conversation will be saved"ï¼‰
  - æ³¨ï¼šä»…æ•°æ®åº“é¡¹ç›®æ”¯æŒå¯¹è¯æŒä¹…åŒ–ï¼Œæœ¬åœ°é¡¹ç›®å¯¹è¯ä¸ä¿å­˜
- [x] é—®é¢˜å›ç­” UI - æ”¯æŒå¤šé€‰ (multiSelect) é—®é¢˜ç±»å‹
  - SelectedAnswers ç±»å‹æ”¯æŒ `string | string[]`
  - handleSelectAnswer åŒºåˆ†å•é€‰/å¤šé€‰é€»è¾‘ï¼ˆtoggle è¡Œä¸ºï¼‰
  - å¤šé€‰é—®é¢˜æ˜¾ç¤º "(Multiple selections allowed)" æç¤º
  - é€‰é¡¹æŒ‰é’®ä½¿ç”¨å¤é€‰æ¡†æ ·å¼ (â˜‘/â˜)
  - ç­”æ¡ˆæ ¼å¼åŒ–ä¸ºé€—å·åˆ†éš”åˆ—è¡¨
  - æ·»åŠ å•å…ƒæµ‹è¯•éªŒè¯æ ¼å¼åŒ–é€»è¾‘

### 12.4 è®¡åˆ’ç»“æœå¤„ç† âœ… (2026-01-05 å®Œæˆ)

- [x] è§£æ result å†…å®¹ - ä» Markdown æå–ç»“æ„åŒ–ä»»åŠ¡
  - `parseTasksFromResult()` å‡½æ•° (src/app/page.tsx:35-93)
  - æ­£åˆ™è§£æ Markdown æ ¼å¼ï¼Œæå–ä¼˜å…ˆçº§ã€éªŒæ”¶æ ‡å‡†ã€æ ‡ç­¾ã€é¢„ä¼°æ—¶é—´ã€ç›¸å…³æ–‡ä»¶
- [x] ä»»åŠ¡å¡ç‰‡å±•ç¤º - å³ä¾§é¢æ¿æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨
  - TaskCard ç»„ä»¶ï¼šä¼˜å…ˆçº§é¢œè‰²ç¼–ç ã€æ‹–æ‹½æ’åºã€éªŒæ”¶æ ‡å‡†é¢„è§ˆ
  - TaskList ç»„ä»¶ï¼šç­›é€‰ã€ç»Ÿè®¡ã€å¯¼å‡º/å‘å¸ƒæŒ‰é’®
- [x] ä»»åŠ¡ç¼–è¾‘åŠŸèƒ½ - æ”¯æŒä¿®æ”¹ä»»åŠ¡æ ‡é¢˜ã€æè¿°ã€ä¼˜å…ˆçº§
  - TaskEditPanel ç»„ä»¶ï¼šå®Œæ•´ç¼–è¾‘é¢æ¿ï¼Œæ”¯æŒæ‰€æœ‰å­—æ®µç¼–è¾‘
  - æ”¯æŒéªŒæ”¶æ ‡å‡†å¢åˆ æ”¹ã€ä¾èµ–å…³ç³»è®¾ç½®ã€æ ‡ç­¾ç®¡ç†

### 12.5 æ•°æ®æŒä¹…åŒ–

- [x] é…ç½® Prisma + PostgreSQL (å·²åœ¨ Phase 1 å®Œæˆ)
- [x] å®ç°ç”¨æˆ·è®¤è¯ (Slack Botï¼Œè§é™„å½• A) (å·²åœ¨ Phase 1 å®Œæˆ)
- [x] ä¿å­˜å¯¹è¯å†å²å’Œè®¡åˆ’ç»“æœ (å·²åœ¨ 12.3 å®Œæˆ)
- [ ] ä¼šè¯ç®¡ç† - æ”¯æŒæŸ¥çœ‹å†å²è®¡åˆ’

---

## é™„å½• Aï¼šSlack Bot è®¤è¯å­é¡¹ç›®

### A.1 æ¦‚è¿°

ä½¿ç”¨ Slack Bot ä½œä¸ºç”¨æˆ·è®¤è¯å…¥å£ï¼Œåˆ©ç”¨ Slack ç”¨æˆ· ID çš„å”¯ä¸€æ€§å»ºç«‹è‡ªæœ‰è®¤è¯ä½“ç³»ã€‚

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- å›¢é˜Ÿæˆå‘˜å·²åœ¨ Slack ä¸­ï¼Œæ— éœ€é¢å¤–æ³¨å†Œ
- Slack User ID å¤©ç„¶å”¯ä¸€ï¼Œå¯ä½œä¸ºç”¨æˆ·æ ‡è¯†
- æ”¯æŒç§æœ‰éƒ¨ç½²ï¼Œä¸ä¾èµ–ç¬¬ä¸‰æ–¹ OAuth

### A.2 è®¤è¯æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è®¤è¯æµç¨‹                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Slack ç”¨æˆ·                                                      â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”‚ 1. å‘é€ /seedbed-login                                    â”‚
â”‚      â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚  Slack Bot  â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚         â”‚ 2. è·å– Slack User ID + Username                       â”‚
â”‚         â”‚ 3. ç”Ÿæˆä¸€æ¬¡æ€§ç™»å½• Token (æœ‰æ•ˆæœŸ 5 åˆ†é’Ÿ)                  â”‚
â”‚         â”‚ 4. è¿”å›ç™»å½•é“¾æ¥                                         â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ ğŸ”— ç‚¹å‡»ç™»å½• Seedbed                          â”‚                 â”‚
â”‚  â”‚ https://seedbed.example.com/auth?token=xxx  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                                                        â”‚
â”‚         â”‚ 5. ç”¨æˆ·ç‚¹å‡»é“¾æ¥                                         â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚  Web ç«¯     â”‚                                                 â”‚
â”‚  â”‚  /api/auth  â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚         â”‚ 6. éªŒè¯ Token                                          â”‚
â”‚         â”‚ 7. æŸ¥æ‰¾/åˆ›å»ºç”¨æˆ·è®°å½•                                    â”‚
â”‚         â”‚ 8. ç­¾å‘ JWT Session                                    â”‚
â”‚         â”‚ 9. è®¾ç½® Cookie                                         â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚  ç™»å½•æˆåŠŸ   â”‚ â†’ è·³è½¬åˆ° Dashboard                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### A.3 æ•°æ®æ¨¡å‹

```prisma
// User æ¨¡å‹ - å…³è” Slack èº«ä»½
model User {
  id            String    @id @default(cuid())
  slackUserId   String    @unique      // Slack User ID (å”¯ä¸€æ ‡è¯†)
  slackUsername String                 // Slack æ˜¾ç¤ºå
  slackTeamId   String?                // Slack å›¢é˜Ÿ ID
  email         String?                // å¯é€‰ï¼Œä» Slack profile è·å–
  avatarUrl     String?                // å¤´åƒ URL

  // ä¸šåŠ¡å…³è”
  projects      Project[]
  linearToken   String?                // åŠ å¯†å­˜å‚¨

  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

// ç™»å½• Token æ¨¡å‹ - ä¸€æ¬¡æ€§ä»¤ç‰Œ
model LoginToken {
  id            String    @id @default(cuid())
  token         String    @unique      // éšæœºç”Ÿæˆçš„ token
  slackUserId   String                 // å…³è”çš„ Slack User ID
  slackUsername String                 // Slack ç”¨æˆ·å
  expiresAt     DateTime               // è¿‡æœŸæ—¶é—´ (5 åˆ†é’Ÿ)
  usedAt        DateTime?              // ä½¿ç”¨æ—¶é—´ (null = æœªä½¿ç”¨)

  createdAt     DateTime  @default(now())
}
```

### A.4 Slack Bot å®ç°

**ç›®å½•ç»“æ„** (ä½œä¸ºå­é¡¹ç›®):
```
seedbed/
â”œâ”€â”€ slack-bot/                    # Slack Bot å­é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts              # å…¥å£
â”‚   â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”‚   â””â”€â”€ login.ts          # /seedbed-login å‘½ä»¤
â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚       â””â”€â”€ token.ts          # Token ç”Ÿæˆé€»è¾‘
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.example
â”œâ”€â”€ src/                          # ä¸»é¡¹ç›® (Next.js)
â””â”€â”€ ...
```

**Slash Command å®ç°**:
```typescript
// slack-bot/src/commands/login.ts

import { App } from '@slack/bolt'
import { generateLoginToken } from '../lib/token'

export function registerLoginCommand(app: App) {
  app.command('/seedbed-login', async ({ command, ack, respond }) => {
    await ack()

    const { user_id, user_name, team_id } = command

    // ç”Ÿæˆç™»å½• Token (è°ƒç”¨ä¸»é¡¹ç›® API æˆ–ç›´æ¥å†™æ•°æ®åº“)
    const token = await generateLoginToken({
      slackUserId: user_id,
      slackUsername: user_name,
      slackTeamId: team_id,
    })

    const loginUrl = `${process.env.WEB_URL}/auth?token=${token}`

    await respond({
      response_type: 'ephemeral',  // ä»…å‘é€è€…å¯è§
      blocks: [
        {
          type: 'section',
          text: {
            type: 'mrkdwn',
            text: `ğŸŒ± *ç™»å½• Seedbed*\n\nç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ç™»å½• (é“¾æ¥ 5 åˆ†é’Ÿå†…æœ‰æ•ˆ)`,
          },
        },
        {
          type: 'actions',
          elements: [
            {
              type: 'button',
              text: { type: 'plain_text', text: 'ğŸ”— æ‰“å¼€ Seedbed' },
              url: loginUrl,
              style: 'primary',
            },
          ],
        },
      ],
    })
  })
}
```

### A.5 Web ç«¯è®¤è¯ API

```typescript
// src/app/api/auth/slack/route.ts

import { NextRequest, NextResponse } from 'next/server'
import { prisma } from '@/lib/prisma'
import { SignJWT } from 'jose'

export async function GET(request: NextRequest) {
  const token = request.nextUrl.searchParams.get('token')

  if (!token) {
    return NextResponse.redirect('/login?error=missing_token')
  }

  // 1. æŸ¥æ‰¾å¹¶éªŒè¯ Token
  const loginToken = await prisma.loginToken.findUnique({
    where: { token },
  })

  if (!loginToken) {
    return NextResponse.redirect('/login?error=invalid_token')
  }

  if (loginToken.usedAt) {
    return NextResponse.redirect('/login?error=token_used')
  }

  if (loginToken.expiresAt < new Date()) {
    return NextResponse.redirect('/login?error=token_expired')
  }

  // 2. æ ‡è®° Token å·²ä½¿ç”¨
  await prisma.loginToken.update({
    where: { id: loginToken.id },
    data: { usedAt: new Date() },
  })

  // 3. æŸ¥æ‰¾æˆ–åˆ›å»ºç”¨æˆ·
  let user = await prisma.user.findUnique({
    where: { slackUserId: loginToken.slackUserId },
  })

  if (!user) {
    user = await prisma.user.create({
      data: {
        slackUserId: loginToken.slackUserId,
        slackUsername: loginToken.slackUsername,
      },
    })
  }

  // 4. ç­¾å‘ JWT
  const jwt = await new SignJWT({ userId: user.id })
    .setProtectedHeader({ alg: 'HS256' })
    .setExpirationTime('7d')
    .sign(new TextEncoder().encode(process.env.AUTH_SECRET))

  // 5. è®¾ç½® Cookie å¹¶é‡å®šå‘
  const response = NextResponse.redirect(new URL('/', request.url))
  response.cookies.set('auth-token', jwt, {
    httpOnly: true,
    secure: process.env.NODE_ENV === 'production',
    sameSite: 'lax',
    maxAge: 7 * 24 * 60 * 60,  // 7 å¤©
  })

  return response
}
```

### A.6 å¾…åŠäº‹é¡¹

- [ ] **Slack App é…ç½®** - åœ¨ api.slack.com åˆ›å»º Appï¼Œé…ç½® Bot Token Scopes
- [ ] **Bot åŸºç¡€æ¡†æ¶** - ä½¿ç”¨ @slack/bolt æ­å»º
- [ ] **Slash Command** - å®ç° `/seedbed-login` å‘½ä»¤
- [ ] **Token ç”Ÿæˆ API** - `/api/auth/token/generate` (ä¾› Bot è°ƒç”¨)
- [ ] **Token éªŒè¯ API** - `/api/auth/slack` (Web ç«¯éªŒè¯)
- [ ] **JWT ä¸­é—´ä»¶** - ä¿æŠ¤éœ€è¦è®¤è¯çš„ API è·¯ç”±
- [ ] **ç”¨æˆ· Context** - React Context æä¾›å½“å‰ç”¨æˆ·ä¿¡æ¯
- [ ] **ç™»å‡ºåŠŸèƒ½** - æ¸…é™¤ Cookie

---

## é™„å½• Bï¼šLinear é›†æˆè¯¦ç»†æ–¹æ¡ˆ

### B.1 æŠ€æœ¯é€‰å‹

**SDK**: `@linear/sdk` (å®˜æ–¹ TypeScript SDK)
```bash
npm install @linear/sdk
```

**è®¤è¯æ–¹å¼**: Personal API Key (é OAuth)
- ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œæ— éœ€å›è°ƒ URL é…ç½®
- ç¼ºç‚¹ï¼šæ¯ä¸ªç”¨æˆ·éœ€è¦æ‰‹åŠ¨è·å– API Key
- é€‚ç”¨åœºæ™¯ï¼šå›¢é˜Ÿå†…éƒ¨å·¥å…·ï¼Œä¿¡ä»»ç”¨æˆ·

**è·å– API Key**: Linear Settings â†’ API â†’ Personal API Keys â†’ Create key

### B.2 Linear SDK æ ¸å¿ƒ API

```typescript
// lib/linear/client.ts
import { LinearClient } from '@linear/sdk'

// åˆå§‹åŒ–å®¢æˆ·ç«¯
export function createLinearClient(apiKey: string) {
  return new LinearClient({ apiKey })
}

// éªŒè¯ API Key æ˜¯å¦æœ‰æ•ˆ
export async function validateApiKey(apiKey: string): Promise<boolean> {
  try {
    const client = new LinearClient({ apiKey })
    await client.viewer  // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
    return true
  } catch {
    return false
  }
}

// è·å–ç”¨æˆ·æ‰€å±å›¢é˜Ÿåˆ—è¡¨
export async function getTeams(client: LinearClient) {
  const teams = await client.teams()
  return teams.nodes.map(team => ({
    id: team.id,
    name: team.name,
    key: team.key,  // å›¢é˜Ÿæ ‡è¯†ï¼Œå¦‚ "ENG"
  }))
}

// è·å–å›¢é˜Ÿä¸‹çš„é¡¹ç›®åˆ—è¡¨
export async function getProjects(client: LinearClient, teamId: string) {
  const team = await client.team(teamId)
  const projects = await team.projects()
  return projects.nodes.map(project => ({
    id: project.id,
    name: project.name,
    state: project.state,  // "planned" | "started" | "completed" | etc.
  }))
}

// è·å–å·¥ä½œæµçŠ¶æ€
export async function getWorkflowStates(client: LinearClient, teamId: string) {
  const states = await client.workflowStates({
    filter: { team: { id: { eq: teamId } } }
  })
  return states.nodes.map(state => ({
    id: state.id,
    name: state.name,
    type: state.type,  // "backlog" | "unstarted" | "started" | "completed" | "canceled"
    color: state.color,
  }))
}
```

### B.3 å‘å¸ƒä»»åŠ¡åˆ° Linear

```typescript
// lib/linear/publish.ts
import { LinearClient } from '@linear/sdk'
import { Task } from '@prisma/client'

interface PublishOptions {
  teamId: string
  projectId?: string      // å¯é€‰ï¼Œä¸æŒ‡å®šåˆ™ä¸å…³è”é¡¹ç›®
  createMetaIssue: boolean
  planName: string
}

interface PublishResult {
  success: boolean
  issues: Array<{
    taskId: string
    linearIssueId: string
    linearIssueUrl: string
    identifier: string    // å¦‚ "ENG-123"
  }>
  metaIssue?: {
    id: string
    url: string
    identifier: string
  }
}

// ä¼˜å…ˆçº§æ˜ å°„: Seedbed -> Linear
const PRIORITY_MAP: Record<number, number> = {
  0: 1,  // P0 (ç´§æ€¥) -> Urgent
  1: 2,  // P1 (é«˜)   -> High
  2: 3,  // P2 (ä¸­)   -> Medium
  3: 4,  // P3 (ä½)   -> Low
}

export async function publishToLinear(
  client: LinearClient,
  tasks: Task[],
  options: PublishOptions
): Promise<PublishResult> {
  const results: PublishResult['issues'] = []

  // 1. æ‰¹é‡åˆ›å»º Issues
  for (const task of tasks) {
    const description = formatIssueDescription(task)

    const issuePayload = await client.createIssue({
      teamId: options.teamId,
      projectId: options.projectId,
      title: task.title,
      description,
      priority: PRIORITY_MAP[task.priority] || 3,
      estimate: task.estimateHours,
    })

    if (issuePayload.success) {
      const issue = await issuePayload.issue
      results.push({
        taskId: task.id,
        linearIssueId: issue.id,
        linearIssueUrl: issue.url,
        identifier: issue.identifier,
      })
    }
  }

  // 2. åˆ›å»º META Issue (å¯é€‰)
  let metaIssue: PublishResult['metaIssue']
  if (options.createMetaIssue && results.length > 0) {
    const metaDescription = formatMetaIssueDescription(options.planName, tasks, results)

    const metaPayload = await client.createIssue({
      teamId: options.teamId,
      projectId: options.projectId,
      title: `ğŸ“‹ è®¡åˆ’: ${options.planName}`,
      description: metaDescription,
      priority: 2,  // High priority for tracking
    })

    if (metaPayload.success) {
      const issue = await metaPayload.issue
      metaIssue = {
        id: issue.id,
        url: issue.url,
        identifier: issue.identifier,
      }
    }
  }

  return {
    success: results.length === tasks.length,
    issues: results,
    metaIssue,
  }
}

// æ ¼å¼åŒ– Issue æè¿°
function formatIssueDescription(task: Task): string {
  let description = task.description || ''

  if (task.acceptanceCriteria?.length > 0) {
    description += '\n\n## éªŒæ”¶æ ‡å‡†\n'
    description += task.acceptanceCriteria.map(c => `- [ ] ${c}`).join('\n')
  }

  if (task.relatedFiles?.length > 0) {
    description += '\n\n## ç›¸å…³æ–‡ä»¶\n'
    description += task.relatedFiles.map(f => `- \`${f}\``).join('\n')
  }

  description += '\n\n---\n*ç”± Seedbed è‡ªåŠ¨åˆ›å»º*'

  return description
}

// æ ¼å¼åŒ– META Issue æè¿°
function formatMetaIssueDescription(
  planName: string,
  tasks: Task[],
  publishedIssues: PublishResult['issues']
): string {
  const p0Count = tasks.filter(t => t.priority === 0).length
  const p1Count = tasks.filter(t => t.priority === 1).length
  const p2Count = tasks.filter(t => t.priority === 2).length
  const p3Count = tasks.filter(t => t.priority === 3).length
  const totalHours = tasks.reduce((sum, t) => sum + (t.estimateHours || 0), 0)

  let description = `# ğŸ“‹ è®¡åˆ’æ‘˜è¦: ${planName}\n\n`

  description += `## ä»»åŠ¡ç»Ÿè®¡\n`
  description += `- æ€»ä»»åŠ¡æ•°: ${tasks.length}\n`
  description += `- P0 (ç´§æ€¥): ${p0Count}\n`
  description += `- P1 (é«˜): ${p1Count}\n`
  description += `- P2 (ä¸­): ${p2Count}\n`
  description += `- P3 (ä½): ${p3Count}\n`
  description += `- æ€»é¢„ä¼°å·¥æ—¶: ${totalHours}h\n\n`

  description += `## ä»»åŠ¡åˆ—è¡¨\n`
  publishedIssues.forEach((issue, index) => {
    const task = tasks.find(t => t.id === issue.taskId)
    description += `- [ ] ${issue.identifier} ${task?.title || ''}\n`
  })

  description += '\n---\n*ç”± Seedbed ç”Ÿæˆ*'

  return description
}
```

### B.4 API è·¯ç”±è®¾è®¡

```typescript
// POST /api/linear/validate
// éªŒè¯ Linear API Key
interface ValidateRequest {
  apiKey: string
}
interface ValidateResponse {
  valid: boolean
  user?: { id: string; name: string; email: string }
}

// GET /api/linear/teams
// è·å–ç”¨æˆ·æ‰€å±å›¢é˜Ÿåˆ—è¡¨
interface TeamsResponse {
  teams: Array<{ id: string; name: string; key: string }>
}

// GET /api/linear/teams/[teamId]/projects
// è·å–å›¢é˜Ÿä¸‹çš„é¡¹ç›®åˆ—è¡¨
interface ProjectsResponse {
  projects: Array<{ id: string; name: string; state: string }>
}

// POST /api/plans/[planId]/publish
// å‘å¸ƒè®¡åˆ’åˆ° Linear
interface PublishRequest {
  teamId: string
  projectId?: string
  createMetaIssue?: boolean
}
interface PublishResponse {
  success: boolean
  issues: Array<{
    taskId: string
    linearIssueId: string
    linearIssueUrl: string
    identifier: string
  }>
  metaIssue?: {
    id: string
    url: string
    identifier: string
  }
}
```

### B.5 å‘å¸ƒ UI æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘å¸ƒåˆ° Linear                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  é€‰æ‹©å›¢é˜Ÿ                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ â–¾ Engineering (ENG)                       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  é€‰æ‹©é¡¹ç›® (å¯é€‰)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ â–¾ ä¸å…³è”é¡¹ç›®                              â”‚              â”‚
â”‚  â”‚   Blog - è¯„è®ºåŠŸèƒ½                          â”‚              â”‚
â”‚  â”‚   ç”¨æˆ·ç³»ç»Ÿé‡æ„                             â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  â˜‘ åˆ›å»ºè®¡åˆ’æ‘˜è¦ Issue (META Issue)                          â”‚
â”‚                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                              â”‚
â”‚  å°†åˆ›å»º 12 ä¸ª Issues:                                        â”‚
â”‚  â€¢ P0: 2 ä¸ª                                                  â”‚
â”‚  â€¢ P1: 4 ä¸ª                                                  â”‚
â”‚  â€¢ P2: 5 ä¸ª                                                  â”‚
â”‚  â€¢ P3: 1 ä¸ª                                                  â”‚
â”‚                                                              â”‚
â”‚  [å–æ¶ˆ]                                    [ç¡®è®¤å‘å¸ƒ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### B.6 ç”¨æˆ·è®¾ç½®é¡µé¢

**è®¾ç½®è·¯å¾„**: `/settings`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ è®¾ç½®                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Linear é›†æˆ                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                              â”‚
â”‚  API Key                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ lin_api_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚  âœ… å·²éªŒè¯ - å…³è”è´¦æˆ·: john@example.com                      â”‚
â”‚                                                              â”‚
â”‚  [è·å– API Key â†’]  [éªŒè¯] [ä¿å­˜]                             â”‚
â”‚                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                              â”‚
â”‚  å¦‚ä½•è·å– API Key:                                           â”‚
â”‚  1. æ‰“å¼€ Linear Settings                                     â”‚
â”‚  2. ç‚¹å‡» API â†’ Personal API Keys                             â”‚
â”‚  3. ç‚¹å‡» "Create key"ï¼Œè¾“å…¥åç§°å¦‚ "Seedbed"                  â”‚
â”‚  4. å¤åˆ¶ç”Ÿæˆçš„ Key å¹¶ç²˜è´´åˆ°ä¸Šæ–¹                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### B.7 å¾…åŠäº‹é¡¹

**Phase 3.1: Linear API Key é…ç½®** âœ…
- [x] åˆ›å»º `/settings` é¡µé¢
- [x] æ·»åŠ  Linear API Key è¾“å…¥ç»„ä»¶
- [x] å®ç° `/api/linear/validate` éªŒè¯ API
- [x] å®ç° API Key åŠ å¯†å­˜å‚¨ (User.linearToken)
- [x] æ·»åŠ "è·å– API Key"å¤–é“¾æŒ‡å¼•

**Phase 3.2: è·å– Linear å·¥ä½œåŒºä¿¡æ¯** âœ…
- [x] å®ç° `/api/linear/teams` API
- [x] å®ç° `/api/linear/teams/[teamId]/projects` API
- [x] å‰ç«¯å›¢é˜Ÿ/é¡¹ç›®é€‰æ‹©ä¸‹æ‹‰ç»„ä»¶

**Phase 3.3: å‘å¸ƒåŠŸèƒ½** âœ…
- [x] å®ç° `lib/linear/publish.ts` å‘å¸ƒé€»è¾‘
- [x] å®ç° `/api/plans/[planId]/publish` API
- [x] åˆ›å»º PublishDialog å‘å¸ƒå¼¹çª—ç»„ä»¶
- [x] å‘å¸ƒæˆåŠŸåæ˜¾ç¤º Linear é“¾æ¥
- [x] ä¿å­˜ Task.linearIssueId å…³è”

**Phase 3.4: çŠ¶æ€åŒæ­¥ (å¯é€‰ï¼Œåç»­å®ç°)**
- [ ] å®šæ—¶ä»»åŠ¡æˆ– Webhook åŒæ­¥ Issue çŠ¶æ€
- [ ] æ›´æ–°æœ¬åœ° Task çŠ¶æ€æ˜¾ç¤º

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.8*
*æœ€åæ›´æ–°: 2026-01-05*
*å˜æ›´è¯´æ˜: 12.1 Session ç®¡ç†ä¼˜åŒ–å®Œæˆ - ä½¿ç”¨ --resume <sessionId> æ›¿ä»£ --continueï¼Œå‰ç«¯ä¿å­˜å’Œä¼ é€’ sessionIdï¼Œå¢å¼ºé”™è¯¯å¤„ç†*